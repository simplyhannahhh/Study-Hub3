<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title data-i18n="pageTitle">Study Hub</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --primary-blue: #007bff;
            --accent-orange: #fd7e14;
            --card-bg: #ffffff;
            --border-color: #e9ecef;
            --header-gradient-start: #007bff;
            --header-gradient-end: #00bfff;
            --button-bg: #007bff;
            --button-hover-bg: #0056b3;
            --input-bg: #ffffff;
            --input-text: #343a40;
            --input-placeholder: #6c757d;
            --footer-bg: #343a40;
            --footer-text: #e9ecef;
            --flashcard-q-bg: #e3f2fd;
            --flashcard-a-text: #0056b3;
            --note-article-bg: #fdfdfd;
            --quiz-section-bg: #e6f7ff;
            --download-button-bg: #28a745;
            --download-button-hover-bg: #218838;
            --correct-text: #28a745;
            --correct-bg: rgba(40, 167, 69, 0.1);
            --incorrect-text: #dc3545;
            --incorrect-bg: rgba(220, 53, 69, 0.1);
        }

        body.dark {
            --bg-color: #212529;
            --text-color: #e9ecef;
            --primary-blue: #6610f2;
            --accent-orange: #ffc107;
            --card-bg: #343a40;
            --border-color: #495057;
            --header-gradient-start: #343a40;
            --header-gradient-end: #495057;
            --button-bg: #6610f2;
            --button-hover-bg: #5a00d2;
            --input-bg: #495057;
            --input-text: #e9ecef;
            --input-placeholder: #adb5bd;
            --footer-bg: #1a1e21;
            --footer-text: #ced4da;
            --flashcard-q-bg: #414a51;
            --flashcard-a-text: #b3cde3;
            --note-article-bg: #414a51;
            --quiz-section-bg: #414a51;
            --download-button-bg: #1e7e34;
            --download-button-hover-bg: #155724;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            transition: background-color 0.4s ease, color 0.4s ease;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        header {
            background: linear-gradient(to right, var(--header-gradient-start), var(--header-gradient-end));
            color: var(--footer-text);
            padding: 1.5rem 30px;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 35px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.25);
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        header h1 {
            margin: 0;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .header-controls {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 15px; /* Space between controls */
        }

        button {
            padding: 12px 25px;
            background-color: var(--button-bg);
            color: var(--button-text);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        button:hover {
            background-color: var(--button-hover-bg);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.35);
        }

        input[type="text"] {
            padding: 12px 20px;
            font-size: 1.05rem;
            border: 1px solid var(--border-color);
            border-radius: 30px;
            background-color: var(--input-bg);
            color: var(--input-text);
            box-shadow: inset 0 1px 4px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 4px rgba(0,123,255,0.3);
        }

        input[type="text"]::placeholder {
            color: var(--input-placeholder);
        }

        .language-select {
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--input-text);
            font-size: 1rem;
            cursor: pointer;
            appearance: none; /* Removes default dropdown arrow */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 16px;
            transition: all 0.3s ease;
        }

        .dark .language-select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23e9ecef' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
        }

        .language-select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(0,123,255,0.2);
        }

        main {
            flex-grow: 1;
            max-width: 1000px;
            margin: 0 auto;
            padding: 25px;
        }

        section {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            transition: background-color 0.4s ease, border-color 0.4s ease, box-shadow 0.4s ease, transform 0.2s ease;
        }

        section:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.15);
        }

        h2 {
            color: var(--primary-blue);
            margin-top: 0;
            margin-bottom: 25px;
            font-size: 2.4rem;
            font-weight: 700;
            text-align: center;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 15px;
            position: relative;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 15px;
            height: 15px;
            background-color: var(--accent-orange);
            border-radius: 50%;
            box-shadow: 0 0 8px rgba(253,126,20,0.5);
        }

        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .card {
            background-color: var(--flashcard-q-bg);
            border: 1px solid var(--border-color);
            padding: 25px;
            border-radius: 15px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
            text-align: center;
            font-size: 1.15rem;
            font-weight: 500;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 150px;
        }

        .card p {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        .card .answer {
            display: none;
            font-weight: bold;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px dashed var(--border-color);
            color: var(--flashcard-a-text);
            font-size: 1.3rem;
        }

        #notes article {
            background-color: var(--note-article-bg);
            border: 1px solid var(--border-color);
            padding: 30px;
            border-radius: 15px;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.08);
        }

        #notes h3 {
            color: var(--accent-orange);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.8rem;
            font-weight: 600;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        #notes p {
            font-size: 1.1rem;
            color: var(--text-color);
            margin-bottom: 1em; /* Add spacing between paragraphs */
        }
        #notes p:last-child {
            margin-bottom: 0; /* No margin after last paragraph */
        }


        .quiz-content {
            background-color: var(--quiz-section-bg);
            border: 1px solid var(--border-color);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        #quiz input[type="text"] {
            margin-bottom: 25px;
            width: 70%;
            max-width: 400px;
        }

        #quizFeedback {
            margin-top: 25px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            min-height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: transparent;
            transition: background-color 0.3s ease;
        }

        .text-green {
            color: var(--correct-text);
            background-color: var(--correct-bg);
        }

        .text-red {
            color: var(--incorrect-text);
            background-color: var(--incorrect-bg);
        }

        #downloads a {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background-color: var(--download-button-bg);
            color: var(--button-text);
            padding: 18px 35px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.2rem;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 6px 12px rgba(0,0,0,0.25);
        }

        #downloads a:hover {
            background-color: var(--download-button-hover-bg);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.35);
        }

        footer {
            background-color: var(--footer-bg);
            color: var(--footer-text);
            text-align: center;
            padding: 25px;
            margin-top: 50px;
            font-size: 1rem;
            box-shadow: 0 -6px 12px rgba(0,0,0,0.25);
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
        }

        @media (max-width: 992px) {
            header { padding: 1.2rem 25px; }
            header h1 { font-size: 2.2rem; }
            .header-controls {
                flex-direction: column;
                width: 100%;
                gap: 10px;
            }
            header button, header input[type="text"], .language-select {
                width: 100%;
            }
            button { padding: 10px 20px; font-size: 1rem; }
            input[type="text"] { padding: 10px 15px; }
            .language-select { padding: 8px 12px; font-size: 0.95rem; }
            main { padding: 20px; }
            section { padding: 30px; margin-bottom: 25px; }
            h2 { font-size: 2rem; margin-bottom: 20px; padding-bottom: 12px; }
            h2::after { bottom: -8px; width: 12px; height: 12px; }
            .card { padding: 20px; font-size: 1.05rem; }
            .card .answer { margin-top: 15px; padding-top: 10px; font-size: 1.1rem; }
            #notes h3 { font-size: 1.6rem; }
            #notes p { font-size: 1rem; }
            #quiz input[type="text"] { width: 85%; }
            #downloads a { padding: 15px 25px; font-size: 1.05rem; }
            footer { padding: 20px; }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                padding: 1.2rem 20px;
                text-align: center;
            }
            header h1 { margin-bottom: 20px; }
            .header-controls {
                gap: 8px;
            }
            header button, header input[type="text"], .language-select {
                margin-bottom: 5px;
                box-sizing: border-box;
            }
            main { padding: 15px; }
            section { padding: 25px; margin-bottom: 20px; }
            h2 { font-size: 1.8rem; margin-bottom: 18px; padding-bottom: 10px; }
            h2::after { bottom: -7px; width: 10px; height: 10px; }
            .card-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .card { min-height: 120px; }
            #notes h3 { font-size: 1.5rem; }
            #downloads a { padding: 12px 20px; font-size: 1rem; }
            footer { padding: 15px; margin-top: 30px; }
        }

        @media (max-width: 480px) {
            header { padding: 1rem 15px; }
            header h1 { font-size: 1.6rem; }
            button { font-size: 0.95rem; padding: 10px 18px; }
            input[type="text"] { font-size: 0.95rem; padding: 10px 15px; }
            main { padding: 10px; }
            section { padding: 20px; }
            h2 { font-size: 1.6rem; }
            .card { padding: 18px; }
            .card .answer { font-size: 1.1rem; }
            #notes p { font-size: 0.95rem; }
            #quiz input[type="text"] { width: 95%; }
        }
    </style>
</head>
<body>
    <header>
        <h1 data-i18n="appTitle">ðŸ“š Study Hub</h1>
        <div class="header-controls">
            <select id="languageSelector" class="language-select">
                <option value="en">English</option>
                <option value="es">EspaÃ±ol</option>
                <option value="fr">FranÃ§ais</option>
                <option value="de">Deutsch</option>
                <option value="it">Italiano</option>
            </select>
            <button id="darkModeToggle" data-i18n="darkModeButton">Dark Mode</button>
            <input type="text" id="searchInput" data-i18n="searchInputPlaceholder" placeholder="Search resources..." />
        </div>
    </header>

    <main>
        <section id="flashcards">
            <h2 data-i18n="flashcardsTitle">Flashcards</h2>
            <div class="card-container">
                <div class="card">
                    <p data-i18n="flashcard1Question">What is the capital of France?</p>
                    <span class="answer" data-i18n="flashcard1Answer">Paris</span>
                </div>
                <div class="card">
                    <p data-i18n="flashcard2Question">2 + 2 = ?</p>
                    <span class="answer" data-i18n="flashcard2Answer">4</span>
                </div>
            </div>
        </section>

        <section id="notes">
            <h2 data-i18n="notesTitle">Study Notes</h2>
            <article>
                <h3 data-i18n="biologyNoteTitle">Biology: The Cell</h3>
                <p data-i18n="biologyNoteContent1"></p>
                <p data-i18n="biologyNoteContent2"></p>
                <p data-i18n="biologyNoteContent3"></p>
                <p data-i18n="biologyNoteContent4"></p>
                <p data-i18n="biologyNoteContent5"></p>
            </article>
        </section>

        <section id="quiz">
            <h2 data-i18n="quizTitle">Mini Quiz</h2>
            <div class="quiz-content">
                <p id="quizQuestionDisplay" data-i18n="quizQuestion"></p>
                <input type="text" id="quizAnswerInput" data-i18n="quizInputPlaceholder" placeholder="Your answer" />
                <div class="quiz-buttons">
                    <button id="quizActionButton" data-i18n="quizStartButton">Start Quiz</button>
                    <button id="quizGoBackButton" data-i18n="quizGoBackButton" style="display: none;">Go Back</button>
                </div>
                <div id="quizFeedback"></div>
            </div>
        </section>

        <section id="downloads">
            <h2 data-i18n="downloadsTitle">Downloadables</h2>
            <a href="sample.pdf" download data-i18n="downloadLink">ðŸ“„ Download Sample Notes</a>
        </section>
    </main>

    <footer>
        <p data-i18n="footerText">Â© 2025 Study Hub</p>
    </footer>

    <script>
        // --- Translations Data ---
        const translations = {
            en: {
                pageTitle: "Study Hub",
                appTitle: "ðŸ“š Study Hub",
                darkModeButton: "Dark Mode",
                searchInputPlaceholder: "Search resources...",
                flashcardsTitle: "Flashcards",
                flashcard1Question: "What is the capital of France?",
                flashcard1Answer: "Paris",
                flashcard2Question: "2 + 2 = ?",
                flashcard2Answer: "4",
                notesTitle: "Study Notes",
                biologyNoteTitle: "Biology: The Cell",
                biologyNoteContent1: "The cell is the fundamental unit of life. All living organisms, from the smallest bacteria to the largest whales, are composed of cells. Cells are the basic building blocks, and they carry out all the essential functions necessary for life, such as obtaining nutrients, converting them into energy, and reproducing.",
                biologyNoteContent2: "There are two main types of cells: prokaryotic and eukaryotic. Prokaryotic cells are simpler and older, lacking a nucleus and other membrane-bound organelles. Bacteria and archaea are examples of prokaryotes. Eukaryotic cells, on the other hand, are more complex, possessing a true nucleus that houses their genetic material and various specialized organelles.",
                biologyNoteContent3: "Key organelles in eukaryotic cells include the nucleus, which controls cell growth and reproduction; mitochondria, often called the 'powerhouses' of the cell, responsible for energy production (ATP); the endoplasmic reticulum (ER), involved in protein and lipid synthesis; and the Golgi apparatus, which modifies, sorts, and packages proteins and lipids.",
                biologyNoteContent4: "The cell membrane acts as a protective barrier that regulates what enters and leaves the cell. It's composed of a lipid bilayer with embedded proteins, giving it a 'fluid mosaic' structure. This selective permeability is crucial for maintaining the cell's internal environment.",
                biologyNoteContent5: "Cell division is a vital process. In multicellular organisms, it allows for growth and the repair of damaged tissues. In single-celled organisms, it is the primary method of reproduction. Mitosis is the most common form of cell division for growth and repair, while meiosis is specialized for sexual reproduction.",
                quizTitle: "Mini Quiz",
                quizStartButton: "Start Quiz",
                quizNextButton: "Next Question",
                quizSubmitButton: "Submit Answer", // This will be dynamic based on current state
                quizRetakeButton: "Retake Quiz",
                quizGoBackButton: "Go Back", // New translation for the "Go Back" button
                quizInputPlaceholder: "Your answer",
                quizCorrect: "Correct!",
                quizIncorrect: "Incorrect. The answer was ",
                quizCompleted: "Quiz Completed! You got ",
                quizOutOf: " out of ",
                quizQ1: "What are the two main types of cells?",
                quizA1: "Prokaryotic and eukaryotic",
                quizQ2: "Which organelle is known as the 'powerhouse' of the cell?",
                quizA2: "Mitochondria",
                quizQ3: "What controls cell growth and reproduction?",
                quizA3: "Nucleus",
                quizQ4: "What is the primary function of the cell membrane?",
                quizA4: "Protection",
                quizQ5: "What is the most common form of cell division for growth and repair?",
                quizA5: "Mitosis",
                downloadsTitle: "Downloadables",
                downloadLink: "ðŸ“„ Download Sample Notes",
                footerText: "Â© 2025 Study Hub"
            },
            es: {
                pageTitle: "Centro de Estudio",
                appTitle: "ðŸ“š Centro de Estudio",
                darkModeButton: "Modo Oscuro",
                searchInputPlaceholder: "Buscar recursos...",
                flashcardsTitle: "Tarjetas de Vocabulario",
                flashcard1Question: "Â¿CuÃ¡l es la capital de Francia?",
                flashcard1Answer: "ParÃ­s",
                flashcard2Question: "2 + 2 = ?",
                flashcard2Answer: "4",
                notesTitle: "Apuntes de Estudio",
                biologyNoteTitle: "BiologÃ­a: La CÃ©lula",
                biologyNoteContent1: "La cÃ©lula es la unidad fundamental de la vida. Todos los organismos vivos, desde las bacterias mÃ¡s pequeÃ±as hasta las ballenas mÃ¡s grandes, estÃ¡n compuestos por cÃ©lulas. Las cÃ©lulas son los bloques de construcciÃ³n bÃ¡sicos y realizan todas las funciones esenciales necesarias para la vida, como la obtenciÃ³n de nutrientes, su conversiÃ³n en energÃ­a y la reproducciÃ³n.",
                biologyNoteContent2: "Existen dos tipos principales de cÃ©lulas: procariotas y eucariotas. Las cÃ©lulas procariotas son mÃ¡s simples y antiguas, carecen de nÃºcleo y de otros orgÃ¡nulos unidos a membranas. Las bacterias y las arqueas son ejemplos de procariotas. Las cÃ©lulas eucariotas, por otro lado, son mÃ¡s complejas, poseen un nÃºcleo verdadero que alberga su material genÃ©tico y varios orgÃ¡nulos especializados.",
                biologyNoteContent3: "Los orgÃ¡nulos clave en las cÃ©lulas eucariotas incluyen el nÃºcleo, que controla el crecimiento y la reproducciÃ³n celular; las mitocondrias, a menudo llamadas las 'centrales energÃ©ticas' de la cÃ©lula, responsables de la producciÃ³n de energÃ­a (ATP); el retÃ­culo endoplasmÃ¡tico (RE), implicado en la sÃ­ntesis de proteÃ­nas y lÃ­pidos; y el aparato de Golgi, que modifica, clasifica y empaqueta proteÃ­nas y lÃ­pidos.",
                biologyNoteContent4: "La membrana celular actÃºa como una barrera protectora que regula lo que entra y sale de la cÃ©lula. EstÃ¡ compuesta por una bicapa lipÃ­dica con proteÃ­nas incrustadas, lo que le da una estructura de 'mosaico fluido'. Esta permeabilidad selectiva es crucial para mantener el ambiente interno de la cÃ©lula.",
                biologyNoteContent5: "La divisiÃ³n celular es un proceso vital. En los organismos multicelulares, permite el crecimiento y la reparaciÃ³n de tejidos daÃ±ados. En los organismos unicelulares, es el mÃ©todo principal de reproducciÃ³n. La mitosis es la forma mÃ¡s comÃºn de divisiÃ³n celular para el crecimiento y la reparaciÃ³n, mientras que la meiosis estÃ¡ especializada en la reproducciÃ³n sexual.",
                quizTitle: "Mini Cuestionario",
                quizStartButton: "Iniciar Cuestionario",
                quizNextButton: "Siguiente Pregunta",
                quizSubmitButton: "Enviar Respuesta",
                quizRetakeButton: "Volver a Intentar Cuestionario",
                quizGoBackButton: "Volver", // New translation for the "Go Back" button
                quizInputPlaceholder: "Tu respuesta",
                quizCorrect: "Â¡Correcto!",
                quizIncorrect: "Incorrecto. La respuesta era ",
                quizCompleted: "Â¡Cuestionario Completado! Obtuviste ",
                quizOutOf: " de ",
                quizQ1: "Â¿CuÃ¡les son los dos tipos principales de cÃ©lulas?",
                quizA1: "Procariotas y eucariotas",
                quizQ2: "Â¿QuÃ© orgÃ¡nulo se conoce como la 'central energÃ©tica' de la cÃ©lula?",
                quizA2: "Mitocondria",
                quizQ3: "Â¿QuÃ© controla el crecimiento y la reproducciÃ³n celular?",
                quizA3: "NÃºcleo",
                quizQ4: "Â¿CuÃ¡l es la funciÃ³n principal de la membrana celular?",
                quizA4: "Regula lo que entra y sale de la cÃ©lula",
                quizQ5: "Â¿CuÃ¡l es la forma mÃ¡s comÃºn de divisiÃ³n celular para el crecimiento y la reparaciÃ³n?",
                quizA5: "Mitosis",
                downloadsTitle: "Descargables",
                downloadLink: "ðŸ“„ Descargar Apuntes de Ejemplo",
                footerText: "Â© 2025 Centro de Estudio"
            },
            fr: {
                pageTitle: "Centre d'Ã‰tude",
                appTitle: "ðŸ“š Centre d'Ã‰tude",
                darkModeButton: "Mode Sombre",
                searchInputPlaceholder: "Rechercher des ressources...",
                flashcardsTitle: "Cartes MÃ©moire",
                flashcard1Question: "Quelle est la capitale de la France ?",
                flashcard1Answer: "Paris",
                flashcard2Question: "2 + 2 = ?",
                flashcard2Answer: "4",
                notesTitle: "Notes d'Ã‰tude",
                biologyNoteTitle: "Biologie : La Cellule",
                biologyNoteContent1: "La cellule est l'unitÃ© fondamentale de la vie. Tous les organismes vivants, des plus petites bactÃ©ries aux plus grandes baleines, sont composÃ©s de cellules. Les cellules sont les Ã©lÃ©ments constitutifs de base et elles remplissent toutes les fonctions essentielles nÃ©cessaires Ã  la vie, telles que l'obtention de nutriments, leur conversion en Ã©nergie et la reproduction.",
                biologyNoteContent2: "Il existe deux principaux types de cellules : procaryotes et eucaryotes. Les cellules procaryotes sont plus simples et plus anciennes, dÃ©pourvues de noyau et d'autres organites liÃ©s Ã  la membrane. Les bactÃ©ries et les archÃ©es sont des exemples de procaryotes. Les cellules eucaryotes, en revanche, sont plus complexes, possÃ©dant un vÃ©ritable noyau qui abrite leur matÃ©riel gÃ©nÃ©tique et divers organites spÃ©cialisÃ©s.",
                biologyNoteContent3: "Les organites clÃ©s des cellules eucaryotes comprennent le noyau, qui contrÃ´le la croissance et la reproduction cellulaire ; les mitochondries, souvent appelÃ©es les Â« centrales Ã©lectriques Â» de la cellule, responsables de la production d'Ã©nergie (ATP) ; le rÃ©ticulum endoplasmique (RE), impliquÃ© dans la synthÃ¨se des protÃ©ines et des lipides ; et l'appareil de Golgi, qui modifie, trie et emballe les protÃ©ines et les lipides.",
                biologyNoteTitle: "Biologie : La Cellule",
                biologyNoteContent4: "La membrane cellulaire agit comme une barriÃ¨re protectrice qui rÃ©gule ce qui entre et sort de la cellule. Elle est composÃ©e d'une bicouche lipidique avec des protÃ©ines intÃ©grÃ©es, lui donnant une structure en Â« mosaÃ¯que fluide Â». Cette permÃ©abilitÃ© sÃ©lective est cruciale pour maintenir l'environnement interne de la cellule.",
                biologyNoteContent5: "La division cellulaire est un processus vital. Chez les organismes multicellulaires, elle permet la croissance et la rÃ©paration des tissus endommagÃ©s. Chez les organismes unicellulaires, c'est la principale mÃ©thode de reproduction. La mitose est la forme la plus courante de division cellulaire pour la croissance et la rÃ©paration, tandis que la mÃ©iose est spÃ©cialisÃ©e dans la reproduction sexuelle.",
                quizTitle: "Mini Quizz",
                quizStartButton: "DÃ©marrer le Quizz",
                quizNextButton: "Question Suivante",
                quizSubmitButton: "Soumettre la RÃ©ponse",
                quizRetakeButton: "Reprendre le Quizz",
                quizGoBackButton: "Retour", // New translation for the "Go Back" button
                quizInputPlaceholder: "Votre rÃ©ponse",
                quizCorrect: "Correct !",
                quizIncorrect: "Incorrect. La rÃ©ponse Ã©tait ",
                quizCompleted: "Quizz TerminÃ© ! Vous avez obtenu ",
                quizOutOf: " sur ",
                quizQ1: "Quels sont les deux principaux types de cellules ?",
                quizA1: "Procaryotes et eucaryotes",
                quizQ2: "Quel organite est connu comme la 'centrale Ã©lectrique' de la cellule ?",
                quizA2: "Mitochondrie",
                quizQ3: "Qu'est-ce qui contrÃ´le la croissance et la reproduction cellulaire ?",
                quizA3: "Noyau",
                quizQ4: "Quelle est la fonction principale de la membrane cellulaire ?",
                quizA4: "RÃ©gule ce qui entre et sort de la cellule",
                quizQ5: "Quelle est la forme la plus courante de division cellulaire pour la croissance et la rÃ©paration ?",
                quizA5: "Mitose",
                downloadsTitle: "TÃ©lÃ©chargeables",
                downloadLink: "ðŸ“„ TÃ©lÃ©charger des Notes d'Exemple",
                footerText: "Â© 2025 Centre d'Ã‰tude"
            },
            de: {
                pageTitle: "Studienzentrum",
                appTitle: "ðŸ“š Studienzentrum",
                darkModeButton: "Dunkler Modus",
                searchInputPlaceholder: "Ressourcen suchen...",
                flashcardsTitle: "Lernkarten",
                flashcard1Question: "Was ist die Hauptstadt von Frankreich?",
                flashcard1Answer: "Paris",
                flashcard2Question: "2 + 2 = ?",
                flashcard2Answer: "4",
                notesTitle: "Studiennotizen",
                biologyNoteTitle: "Biologie: Die Zelle",
                biologyNoteContent1: "Die Zelle ist die grundlegende Einheit des Lebens. Alle Lebewesen, von den kleinsten Bakterien bis zu den grÃ¶ÃŸten Walen, bestehen aus Zellen. Zellen sind die grundlegenden Bausteine und fÃ¼hren alle wesentlichen Funktionen aus, die fÃ¼r das Leben notwendig sind, wie die Aufnahme von NÃ¤hrstoffen, deren Umwandlung in Energie und die Reproduktion.",
                biologyNoteContent2: "Es gibt zwei Haupttypen von Zellen: Prokaryoten und Eukaryoten. Prokaryotische Zellen sind einfacher und Ã¤lter, ihnen fehlen ein Zellkern und andere membranumschlossene Organellen. Bakterien und Archaeen sind Beispiele fÃ¼r Prokaryoten. Eukaryotische Zellen hingegen sind komplexer und besitzen einen echten Zellkern, der ihr genetisches Material beherbergt, sowie verschiedene spezialisierte Organellen.",
                biologyNoteContent3: "Zu den SchlÃ¼sselorganellen in eukaryotischen Zellen gehÃ¶ren der Zellkern, der das Zellwachstum und die Reproduktion steuert; Mitochondrien, oft als 'Kraftwerke' der Zelle bezeichnet, die fÃ¼r die Energieproduktion (ATP) verantwortlich sind; das endoplasmatische Retikulum (ER), das an der Protein- und Lipidsynthese beteiligt ist; und der Golgi-Apparat, der Proteine und Lipide modifiziert, sortiert und verpackt.",
                biologyNoteContent4: "Die Zellmembran fungiert als Schutzbarriere, die reguliert, was in die Zelle hinein- und herausgelangt. Sie besteht aus einer Lipiddoppelschicht mit eingelagerten Proteinen, was ihr eine 'flÃ¼ssiges Mosaik'-Struktur verleiht. Diese selektive PermeabilitÃ¤t ist entscheidend fÃ¼r die Aufrechterhaltung des internen Milieus der Zelle.",
                biologyNoteContent5: "Zellteilung ist ein lebenswichtiger Prozess. Bei mehrzelligen Organismen ermÃ¶glicht sie Wachstum und die Reparatur beschÃ¤digter Gewebe. Bei einzelligen Organismen ist sie die primÃ¤re Methode der Reproduktion. Mitose ist die hÃ¤ufigste Form der Zellteilung fÃ¼r Wachstum und Reparatur, wÃ¤hrend Meiose auf die sexuelle Reproduktion spezialisiert ist.",
                quizTitle: "Mini-Quiz",
                quizStartButton: "Quiz starten",
                quizNextButton: "NÃ¤chste Frage",
                quizSubmitButton: "Antwort absenden",
                quizRetakeButton: "Quiz wiederholen",
                quizGoBackButton: "ZurÃ¼ck", // New translation for the "Go Back" button
                quizInputPlaceholder: "Ihre Antwort",
                quizCorrect: "Richtig!",
                quizIncorrect: "Falsch. Die Antwort war ",
                quizCompleted: "Quiz abgeschlossen! Sie haben ",
                quizOutOf: " von ",
                quizQ1: "Was sind die zwei Hauptzelltypen?",
                quizA1: "Prokaryoten und Eukaryoten",
                quizQ2: "Welches Organell ist als 'Kraftwerk' der Zelle bekannt?",
                quizA2: "Mitochondrien",
                quizQ3: "Was steuert Zellwachstum und Reproduktion?",
                quizA3: "Zellkern",
                quizQ4: "Was ist die Hauptfunktion der Zellmembran?",
                quizA4: "Reguliert, was in die Zelle hinein- und herausgelangt",
                quizQ5: "Was ist die hÃ¤ufigste Form der Zellteilung fÃ¼r Wachstum und Reparatur?",
                quizA5: "Mitose",
                downloadsTitle: "Downloads",
                downloadLink: "ðŸ“„ Beispielnotizen herunterladen",
                footerText: "Â© 2025 Studienzentrum"
            },
            it: {
                pageTitle: "Hub di Studio",
                appTitle: "ðŸ“š Hub di Studio",
                darkModeButton: "ModalitÃ  Scura",
                searchInputPlaceholder: "Cerca risorse...",
                flashcardsTitle: "Schede Didattiche",
                flashcard1Question: "Qual Ã¨ la capitale della Francia?",
                flashcard1Answer: "Parigi",
                flashcard2Question: "2 + 2 = ?",
                flashcard2Answer: "4",
                notesTitle: "Appunti di Studio",
                biologyNoteTitle: "Biologia: La Cellula",
                biologyNoteContent1: "La cellula Ã¨ l'unitÃ  fondamentale della vita. Tutti gli organismi viventi, dai batteri piÃ¹ piccoli alle balene piÃ¹ grandi, sono composti da cellule. Le cellule sono i mattoni di base e svolgono tutte le funzioni essenziali necessarie per la vita, come l'ottenimento di nutrienti, la loro conversione in energia e la riproduzione.",
                biologyNoteContent2: "Esistono due tipi principali di cellule: procariotiche ed eucariotiche. Le cellule procariotiche sono piÃ¹ semplici e antiche, prive di nucleo e di altri organelli legati alla membrana. Batteri e archaea sono esempi di procarioti. Le cellule eucariotiche, d'altra parte, sono piÃ¹ complesse, possiedono un vero nucleo che ospita il loro materiale genetico e vari organelli specializzati.",
                biologyNoteContent3: "Gli organelli chiave nelle cellule eucariotiche includono il nucleo, che controlla la crescita e la riproduzione cellulare; i mitocondri, spesso chiamati le 'centrali energetiche' della cellula, responsabili della produzione di energia (ATP); il reticolo endoplasmatico (ER), coinvolto nella sintesi di proteine e lipidi; e l'apparato di Golgi, che modifica, smista e impacchetta proteine e lipidi.",
                biologyNoteContent4: "La membrana cellulare agisce come una barriera protettiva che regola ciÃ² che entra ed esce dalla cellula. Ãˆ composta da un doppio strato lipidico con proteine incorporate, che le conferisce una struttura a 'mosaico fluido'. Questa permeabilitÃ  selettiva Ã¨ cruciale per mantenere l'ambiente interno della cellula.",
                biologyNoteContent5: "La divisione cellulare Ã¨ un processo vitale. Negli organismi multicellulari, consente la crescita e la riparazione dei tessuti danneggiati. Negli organismi unicellulari, Ã¨ il metodo principale di riproduzione. La mitosi Ã¨ la forma piÃ¹ comune di divisione cellulare per la crescita e la riparazione, mentre la meiosi Ã¨ specializzata per la riproduzione sessuale.",
                quizTitle: "Mini Quiz",
                quizStartButton: "Inizia Quiz",
                quizNextButton: "Prossima Domanda",
                quizSubmitButton: "Invia Risposta",
                quizRetakeButton: "Riprova Quiz",
                quizGoBackButton: "Torna indietro", // New translation for the "Go Back" button
                quizInputPlaceholder: "La tua risposta",
                quizCorrect: "Corretto!",
                quizIncorrect: "Errato. La risposta era ",
                quizCompleted: "Quiz Completato! Hai ottenuto ",
                quizOutOf: " su ",
                quizQ1: "Quali sono i due tipi principali di cellule?",
                quizA1: "Procariotiche ed eucariotiche",
                quizQ2: "Quale organello Ã¨ conosciuto come la 'centrale energetica' della cellula?",
                quizA2: "Mitocondri",
                quizQ3: "Cosa controlla la crescita e la riproduzione cellulare?",
                quizA3: "Nucleo",
                quizQ4: "Qual Ã¨ la funzione principale della membrana cellulare?",
                quizA4: "Regola ciÃ² che entra ed esce dalla cellula",
                quizQ5: "Qual Ã¨ la forma piÃ¹ comune di divisione cellulare per la crescita e la riparazione?",
                quizA5: "Mitosi",
                downloadsTitle: "Scaricabili",
                downloadLink: "ðŸ“„ Scarica Appunti Esempio",
                footerText: "Â© 2025 Hub di Studio"
            }
        };

        // --- Global Quiz Variables (moved to top for initialization) ---
        let currentQuestionIndex = 0; // Tracks which question is currently displayed
        let correctAnswersCount = 0;  // Tracks how many questions the user got right
        let quizActive = false;       // State variable: true when quiz is in progress

        // Define quiz questions and their correct answers
        // Using keys that match the 'translations' object for multi-language support
        const quizQuestions = [
            { qKey: 'quizQ1', aKey: 'quizA1' },
            { qKey: 'quizQ2', aKey: 'quizA2' },
            { qKey: 'quizQ3', aKey: 'quizA3' },
            { qKey: 'quizQ4', aKey: 'quizA4' },
            { qKey: 'quizQ5', aKey: 'quizA5' }
        ];

        // --- Mini Quiz DOM Element References (moved to top for early access) ---
        const quizQuestionDisplay = document.getElementById('quizQuestionDisplay'); // Element to display the current question
        const quizAnswerInput = document.getElementById('quizAnswerInput');       // Input field for the answer
        const quizActionButton = document.getElementById('quizActionButton');     // The dynamic button (Start/Next/Retake)
        const quizGoBackButton = document.getElementById('quizGoBackButton');     // The new "Go Back" button
        const quizFeedback = document.getElementById('quizFeedback');             // Area for feedback messages
        const notesSection = document.getElementById('notes');                    // The study notes section to hide/show
        const flashcardsSection = document.getElementById('flashcards');          // Flashcards section
        const downloadsSection = document.getElementById('downloads');            // Downloads section


        // --- Language Selector Functionality ---
        const languageSelector = document.getElementById('languageSelector');

        /**
         * Sets the language of the website by updating text content based on data-i18n attributes.
         * It also handles special cases like placeholder text and the document title.
         * @param {string} lang The language code (e.g., 'en', 'es', 'fr', 'de', 'it').
         */
        function setLanguage(lang) {
            const currentTranslations = translations[lang];
            if (!currentTranslations) {
                console.warn(`No translations found for language: ${lang}`);
                return;
            }

            // Update all elements with data-i18n attributes
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                // Check if the key exists in the current language translations
                if (currentTranslations[key]) {
                    // Special handling for elements with 'placeholder' attribute (like input fields)
                    if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                        element.placeholder = currentTranslations[key];
                    } 
                    // Special handling for the document's title tag
                    else if (element.tagName === 'TITLE') {
                        document.title = currentTranslations[key];
                    } 
                    // For all other elements, update their text content
                    else {
                        element.textContent = currentTranslations[key];
                    }
                }
            });

            // Update specific quiz elements that might change text dynamically
            // (e.g., the quiz action button, which changes between "Start Quiz", "Next Question", "Retake Quiz")
            updateQuizActionButtonText(); 
            // Ensure the quiz question display is updated when language changes
            if (quizActive && currentQuestionIndex < quizQuestions.length) {
                quizQuestionDisplay.textContent = currentTranslations[quizQuestions[currentQuestionIndex].qKey];
            } else if (!quizActive) {
                quizQuestionDisplay.textContent = currentTranslations.quizQuestion;
            }


            // Store the selected language in local storage to remember preference
            localStorage.setItem('selectedLanguage', lang);
        }

        // --- Initial Language Setup ---
        // Get the saved language from local storage, or default to English if none is saved
        const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
        // Set the dropdown selector to the saved or default language
        languageSelector.value = savedLanguage;
        // Apply the translations for the initial language when the page loads
        setLanguage(savedLanguage);

        // Listen for changes in the language selector dropdown
        languageSelector.addEventListener('change', (event) => {
            // When the user selects a new language, call setLanguage with the new value
            setLanguage(event.target.value);
        });


        // --- Dark Mode Toggle Functionality ---
        const darkModeToggle = document.getElementById('darkModeToggle');

        // Add a click event listener to the dark mode button
        darkModeToggle.addEventListener('click', () => {
            // Toggles the 'dark' class on the <body> element.
            // CSS rules (in the <style> block) define how the page looks when this class is present.
            document.body.classList.toggle('dark');
        });


        // --- Flashcard Reveal Functionality ---
        // Select all elements that have the class 'card' (these are our flashcards)
        document.querySelectorAll('.card').forEach(card => {
            // Attach a click event listener to each flashcard
            card.addEventListener('click', () => {
                // Find the 'answer' span within the clicked flashcard
                const answer = card.querySelector('.answer');
                // Toggle the display style of the answer between 'inline' (visible) and 'none' (hidden)
                if (answer.style.display === 'inline') {
                    answer.style.display = 'none';
                } else {
                    answer.style.display = 'inline';
                }
            });
        });


        // --- Search Functionality (Filters sections based on input) ---
        const searchInput = document.getElementById('searchInput');

        // Listen for 'input' events, which fire every time the user types or deletes text
        searchInput.addEventListener('input', () => {
            // Get the search term, convert to lowercase, and remove extra whitespace
            const searchTerm = searchInput.value.toLowerCase().trim();
            // Select all 'section' elements on the page
            document.querySelectorAll('section').forEach(section => {
                // If there's a search term, filter the sections
                if (searchTerm.length > 0) {
                    // Check if the section's text content (lowercase) includes the search term
                    if (section.textContent.toLowerCase().includes(searchTerm)) {
                        section.style.display = 'block'; // Show the section if it matches
                    } else {
                        section.style.display = 'none'; // Hide the section if it doesn't match
                    }
                } else {
                    // If the search term is empty, show all sections
                    section.style.display = 'block';
                }
            });
        });


        // --- Mini Quiz Logic ---
        
        /**
         * Updates the text of the main quiz action button based on the quiz state.
         * Also controls the visibility of the "Go Back" button.
         */
        function updateQuizActionButtonText() {
            const currentLang = languageSelector.value;
            const currentTranslations = translations[currentLang];

            if (!quizActive) {
                quizActionButton.textContent = currentTranslations.quizStartButton;
                quizGoBackButton.style.display = 'none'; // Hide go back button when quiz is not active
            } else if (currentQuestionIndex < quizQuestions.length) {
                quizActionButton.textContent = currentTranslations.quizNextButton;
                quizGoBackButton.style.display = 'inline-block'; // Show go back button when quiz is active
            } else {
                quizActionButton.textContent = currentTranslations.quizRetakeButton;
                quizGoBackButton.style.display = 'inline-block'; // Show go back button after quiz completion
            }
        }

        /**
         * Displays the current quiz question and manages the input field and feedback area.
         */
        function displayCurrentQuizQuestion() {
            const currentLang = languageSelector.value;
            const currentTranslations = translations[currentLang];

            if (currentQuestionIndex < quizQuestions.length) {
                // Display the current question
                quizQuestionDisplay.textContent = currentTranslations[quizQuestions[currentQuestionIndex].qKey];
                // Clear input field and feedback
                quizAnswerInput.value = '';
                quizFeedback.textContent = '';
                quizFeedback.className = ''; // Clear feedback styling
                // Ensure input is enabled
                quizAnswerInput.disabled = false;
                quizAnswerInput.style.display = 'block'; // Ensure input is visible
                quizAnswerInput.placeholder = currentTranslations.quizInputPlaceholder; // Update placeholder
            } else {
                // Quiz completed
                quizQuestionDisplay.textContent = `${currentTranslations.quizCompleted} ${correctAnswersCount} ${currentTranslations.quizOutOf} ${quizQuestions.length}.`;
                quizAnswerInput.style.display = 'none'; // Hide input field
                quizAnswerInput.value = ''; // Clear input
                quizFeedback.textContent = ''; // Clear feedback
                quizFeedback.className = '';
                quizActionButton.textContent = currentTranslations.quizRetakeButton; // Change button to Retake Quiz
                notesSection.style.display = 'block'; // Show notes again after quiz
                flashcardsSection.style.display = 'block'; // Show flashcards again after quiz
                downloadsSection.style.display = 'block';   // Show downloads again after quiz
            }
        }

        // Event listener for the dynamic quiz action button
        quizActionButton.addEventListener('click', () => {
            const currentLang = languageSelector.value;
            const currentTranslations = translations[currentLang];

            if (!quizActive) {
                // If quiz is not active (first click or retake)
                quizActive = true;
                currentQuestionIndex = 0; // Reset question index
                correctAnswersCount = 0;  // Reset score
                notesSection.style.display = 'none'; // Hide notes when quiz starts
                flashcardsSection.style.display = 'none'; // Hide flashcards
                downloadsSection.style.display = 'none';   // Hide downloads
                displayCurrentQuizQuestion(); // Display the first question
                updateQuizActionButtonText(); // Update button to "Next Question" and show Go Back
            } else if (currentQuestionIndex < quizQuestions.length) {
                // If quiz is active and there are more questions, it means "Submit Answer" or "Next Question"
                const userAnswer = quizAnswerInput.value.trim().toLowerCase();
                const correctAnswerText = currentTranslations[quizQuestions[currentQuestionIndex].aKey].toLowerCase();

                if (userAnswer === correctAnswerText) {
                    quizFeedback.textContent = currentTranslations.quizCorrect;
                    quizFeedback.className = "text-green";
                    correctAnswersCount++;
                } else {
                    quizFeedback.textContent = `${currentTranslations.quizIncorrect} ${currentTranslations[quizQuestions[currentQuestionIndex].aKey]}.`;
                    quizFeedback.className = "text-red";
                }

                currentQuestionIndex++; // Move to the next question
                setTimeout(() => { // Give a brief moment to see feedback before moving to next question
                    displayCurrentQuizQuestion();
                    updateQuizActionButtonText(); // Update button to "Next Question" or "Retake Quiz"
                }, 1000); // 1 second delay
            } else {
                // Quiz has finished, and button is "Retake Quiz"
                quizActive = false; // Reset quiz state
                displayCurrentQuizQuestion(); // Will show "Quiz Completed" message
                updateQuizActionButtonText(); // Will show "Start Quiz"
            }
        });

        // Event listener for the new "Go Back" button
        quizGoBackButton.addEventListener('click', () => {
            quizActive = false; // Deactivate quiz
            currentQuestionIndex = 0; // Reset question index
            correctAnswersCount = 0;  // Reset score
            quizAnswerInput.value = ''; // Clear input
            quizAnswerInput.style.display = 'block'; // Ensure input is visible for new quiz start
            quizFeedback.textContent = ''; // Clear feedback
            quizFeedback.className = ''; // Clear feedback styling

            notesSection.style.display = 'block'; // Show all sections
            flashcardsSection.style.display = 'block';
            downloadsSection.style.display = 'block';
            
            // Re-initialize quiz question display to its default prompt
            const currentLang = languageSelector.value;
            quizQuestionDisplay.textContent = translations[currentLang].quizQuestion;

            updateQuizActionButtonText(); // Set main button to "Start Quiz" and hide Go Back button
        });


        // Initialize button text on page load
        updateQuizActionButtonText();
        // Set initial quiz question display state (showing the prompt before start)
        quizQuestionDisplay.textContent = translations[savedLanguage].quizQuestion;

    </script>
</body>
</html>
